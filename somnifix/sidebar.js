const STYLE = `
	    <style>
	        .on-card-product-wrapper {
	            display: none;
	        }
	
	        body.on-open-card .on-button-get-sominifix-close {
	            float: left;
	        }
	
	        .sidebar_header {            
	            font-weight: bold;
	            font-size: 21px;
	            line-height: 24px;
	            text-align: center;
	            color: #1E415F;
	        }
	        
	        .sidebar_body {
	        	display: flex;
	        	flex-direction: column;
	        	justify-content: space-between;
	        	min-height: 90%;
	            margin-top: 20px;
	            background: #F5F6F7;
	            border-radius: 22px;
	            padding: 15px;
	        }
	
	        .sidebar_body p {
	            margin: 0;
	            line-height: normal;
	        }
	
	        .card {
	            display: flex;
	            align-items: center;
	            background: #FFF;
	            border-radius: 15px;
	            margin-bottom: 20px;
	            padding: 15px;
	            gap: 20px;
	            cursor: pointer;
	            height: 107px;
	            border: 2px solid transparent;	            
	        }
	
	        .card svg {
	            fill: #1E415F;
	        }
	
	        .card.selected {
	            background: #F1F7FC;
	            border: 2px solid #2EA5C7;
	            pointer-events: none;
	        }
	
	        .card.selected svg {
	            filter: invert(51%) sepia(97%) saturate(2477%) hue-rotate(346deg) brightness(108%) contrast(88%);
	        }
	
	        .card {
	            position: relative;            
	        }
	
	        .card::after {
	            content: '';
	            position: absolute;
	            top: 15px;
	            right: 15px;
	            color: #F0752D;
	            font-size: 10px;
	        }
	        
	        .card.card_second::after {
	            content: 'TOP-SELLER';
	        }
	
	        .card.card_third::after {
	            content: 'BEST DEAL';
	        }
	
	        .card_info .title {
	            color: #2EA5C7;
	            font-weight: normal;
	            font-size: 16px;
	            margin-bottom: 5px;
	        }
	
	        .card_info .month {
	            color: #3B3B3B;
	            font-size: 11px;
	            margin-bottom: 15px;
	        }
	
	        .card.selected .card_info .title {
	            color: #1E415F;
	            font-weight: bold;
	        }
	
	        .price {
	            white-space: nowrap;
	        }
	
	        .price span {
	            color: #1E415F;
	            font-size: 13px;
	            margin-right: 10px;
	        }
	
	        .price span:first-child{
	            text-decoration: line-through;
	        }
	        
	        .subscribe_block {    
			    opacity: 0;
			    transition: all .4s ease;
			    pointer-events: none;		
			    margin: 25px 0;	   
	        }
	        
	        .subscribe_block.visible {			    
			    opacity: 1;			
			    pointer-events: auto;    
			}
	        
	        .custom_checkbox {
	            cursor: pointer;
	        }
	        
	        .custom_checkbox > input {
	            position: absolute;
	            z-index: -1;
	            visibility: hidden;
	        }
	        
	        .custom_checkbox>p {
	            position: relative;           
	            user-select: none;
	            margin-left: 35px;  
	            font-size: 16px;
	            font-weight: 500;
	            color: #14425E;          
	        }
	                
	        .custom_checkbox > p::before {
	            content: '';
	            position: absolute;
	            top: 0;
	            left: -35px;
	            width: 24px;
	            height: 24px;
	            background: #fff;
	            border: 1px solid #14425E;
	            border-radius: 2px;
	            margin-right: 10px;
	        }
	        
	        .custom_checkbox>input:checked+p::before {
	            background: url('https://conversionratestore.github.io/projects/somnifix/img/check_arrow.svg') #fff no-repeat 2px center;
	        }
	        
	        p.undertext {
	            font-size: 12px;
	            color: #1E415F;
	            font-weight: normal;            
	            margin: 5px 0 0 35px;
	        }
	        
	        .calc_block {
	        	display: flex;
	        	justify-content: space-between;
	        }
	        
	        .calc_block .signs {
	        	display: flex;
	        	align-items: center;
	        }
	        
	        .calc_block .signs.blur .sign {
	        	pointer-events: none;
    			filter: blur(2px);
	        }
	        
	        .calc_block .sign {
	        	cursor: pointer;
	        }       
	        
	        .left span {
	        	color: #1E415F;
	        	font-weight: bold;
				font-size: 22px;
				text-align: center;
				width: 75px;
	        }
	        
	        .left p.strips {
	        	color: #6D6E75;
	        	font-size: 11px;
	        	text-align: center;
	        	margin-top: 12px;
	        }
	        
	        .right {
	        	display: flex;
	        	flex-direction: column;
	        	justify-content: space-between;    			
                align-items: flex-end;
	        }
	        
	        .right .full_price {
	        	color: #5E788D;
	        	text-decoration: line-through;
	        	font-size: 16px;
	        }
	        
	        .right .sale_price {
	        	color: #1E415F;
	        	font-weight: bold;
				font-size: 24px;
	        }
	        
	        .calc_btn button {
	        	background: #2EA5C7;
				border-radius: 100px;
				width: 100%;
				padding: 14px;
				font-weight: 500;
				font-size: 16px;
				border: none;
				color: #fff;
				margin-top: 25px;
				cursor: pointer;
	        }
	    </style>
	    `
const TEMPLATE = `        
	        <p class="sidebar_header">SomniFix<br>Mouth Strips</p>
	        <div class="sidebar_body">
	            <div class="card_wrapper">            
	                <div class="card card_first selected" data-id="32115046023283">
	                    <div>
	                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="8" viewBox="0 0 40 8" fill="none">
	                            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.66481 1.64672C3.76478 2.24413 2.37387 3.03749 1.72256 3.81918L1.46549 3.60499L1.72283 3.81886C1.69971 3.84668 1.66607 3.9137 1.64198 4.03689C1.61906 4.15412 1.61027 4.29352 1.61308 4.43616L1.61311 4.43774C1.61782 4.75219 1.76375 5.04877 2.01552 5.24745L2.01841 5.24973C2.61052 5.72763 3.63674 6.52235 4.30881 6.93837L4.31334 6.94123C4.62802 7.14305 5.00074 7.25759 5.39007 7.27967C6.04976 7.31064 7.07703 7.34714 7.83466 7.32289C8.05126 7.31384 8.26463 7.22092 8.52345 7.04374C8.68845 6.93078 8.84416 6.80489 9.01955 6.66309C9.1361 6.56886 9.26134 6.46761 9.40377 6.35845C10.0897 5.83277 10.9833 5.2882 12.3741 5.27482L12.3773 5.27479L12.5301 5.2748C13.921 5.28819 14.8131 5.83286 15.4983 6.35857C15.6395 6.46696 15.764 6.56761 15.8798 6.66133C16.056 6.80387 16.2124 6.93036 16.378 7.04365C16.6369 7.22065 16.8511 7.31384 17.0696 7.32289C17.8209 7.34713 18.848 7.31065 19.5142 7.27967C19.902 7.25767 20.2698 7.1437 20.593 6.93986L20.5999 6.93564C20.8444 6.78955 21.1387 6.58365 21.4446 6.35889L19.9982 1.90636C18.0067 1.16542 15.3728 0.669218 12.5331 0.669218H12.3836C9.88923 0.669218 7.55042 1.05384 5.66481 1.64672ZM5.46408 1.00831C7.41724 0.394191 9.82393 0 12.3836 0H12.5331C15.5175 0 18.2944 0.533567 20.3868 1.33788C20.481 1.37408 20.5538 1.45086 20.585 1.54683L22.1554 6.38103C22.1997 6.51735 22.1522 6.66673 22.0374 6.7525C21.6644 7.03111 21.2736 7.31237 20.9466 7.5081C20.5232 7.77423 20.0453 7.92014 19.5502 7.94792L19.547 7.9481C18.8799 7.97914 17.8275 8.017 17.0466 7.99171L17.044 7.99163C16.6428 7.97557 16.3036 7.80347 16.0003 7.59605C15.8174 7.47097 15.6206 7.31236 15.4249 7.15451C15.3123 7.06376 15.2 6.97325 15.0909 6.88951C14.4661 6.41011 13.7134 5.95585 12.5252 5.94402H12.379C11.1907 5.95585 10.4364 6.4102 9.81085 6.88962C9.70089 6.97389 9.58772 7.06507 9.47429 7.15646C9.27915 7.31368 9.08322 7.47154 8.90148 7.59595C8.59878 7.80318 8.26019 7.97553 7.86028 7.99162L7.85758 7.99173C7.07045 8.01701 6.0182 7.97913 5.35712 7.94808L5.35407 7.94794C4.85993 7.92021 4.3741 7.77462 3.95436 7.50602C3.24353 7.06566 2.19099 6.249 1.59942 5.77158C1.19178 5.44916 0.95196 4.96472 0.943981 4.44857C0.940602 4.27494 0.950538 4.08573 0.985205 3.90845C1.01876 3.73688 1.08171 3.54326 1.20815 3.39112L1.20842 3.3908C1.9842 2.45972 3.52534 1.6179 5.46408 1.00831Z" fill=""></path>
	                            <path fill-rule="evenodd" clip-rule="evenodd" d="M20.312 1.32484C20.439 1.34214 20.545 1.43052 20.5849 1.55239L22.1678 6.3928C22.2015 6.4959 22.1831 6.60895 22.1185 6.69608C22.0539 6.78322 21.9511 6.83364 21.8426 6.83134C21.2568 6.81892 20.6608 6.80025 20.2308 6.77512C19.7164 6.75145 19.2289 6.49913 18.9241 6.0789L18.9231 6.07748L18.9231 6.07747C18.8248 5.94046 18.7208 5.78156 18.6442 5.61778C18.5711 5.46162 18.5053 5.26464 18.525 5.06005C18.5944 4.05377 19.1084 2.79484 19.9882 1.47117C20.0592 1.36438 20.1849 1.30755 20.312 1.32484ZM20.1711 2.44011C19.563 3.478 19.2401 4.40212 19.1923 5.11062C19.192 5.11485 19.1917 5.11908 19.1912 5.12329C19.1882 5.15198 19.1965 5.21909 19.2504 5.33417C19.3014 5.44322 19.3779 5.56331 19.4664 5.68667C19.6472 5.93559 19.9436 6.09243 20.2631 6.10668L20.2677 6.10688L20.2677 6.10692C20.5721 6.12474 20.9665 6.13941 21.3846 6.15086L20.1711 2.44011Z" fill=""></path>
	                            <path fill-rule="evenodd" clip-rule="evenodd" d="M10.4981 3.25241C10.4977 3.25321 10.4972 3.25475 10.4972 3.25748C10.4972 3.2602 10.4977 3.26174 10.4981 3.26254C10.4985 3.26346 10.499 3.26425 10.4997 3.26493C10.5004 3.26561 10.5012 3.26623 10.5024 3.26671C10.5034 3.26714 10.5053 3.2677 10.5083 3.2677H13.8361C13.8392 3.2677 13.8411 3.26714 13.8421 3.26671C13.8432 3.26623 13.8441 3.26561 13.8448 3.26493C13.8455 3.26425 13.846 3.26346 13.8464 3.26254C13.8467 3.26174 13.8472 3.2602 13.8472 3.25748C13.8472 3.25475 13.8467 3.25321 13.8464 3.25241C13.846 3.2515 13.8455 3.25071 13.8448 3.25003C13.8441 3.24934 13.8432 3.24872 13.8421 3.24824C13.8411 3.24781 13.8392 3.24725 13.8361 3.24725H10.5083C10.5053 3.24725 10.5034 3.24781 10.5024 3.24824C10.5012 3.24872 10.5004 3.24934 10.4997 3.25003C10.499 3.25071 10.4985 3.2515 10.4981 3.25241ZM10.0957 3.25748C10.0957 3.02789 10.2799 2.84572 10.5083 2.84572H13.8361C14.0646 2.84572 14.2488 3.02789 14.2488 3.25748C14.2488 3.48706 14.0646 3.66923 13.8361 3.66923H10.5083C10.2799 3.66923 10.0957 3.48706 10.0957 3.25748Z" fill=""></path>
	                            <path fill-rule="evenodd" clip-rule="evenodd" d="M24.3726 6.22107C24.2154 6.09002 24.1942 5.85638 24.3253 5.69922L27.1729 2.28456C27.3039 2.1274 27.5376 2.10624 27.6947 2.2373V2.2373C27.8519 2.36835 27.873 2.60199 27.742 2.75915L24.8944 6.17381C24.7634 6.33097 24.5297 6.35213 24.3726 6.22107V6.22107Z" fill=""></path>
	                            <path fill-rule="evenodd" clip-rule="evenodd" d="M27.6939 6.18798C27.5399 6.3227 27.3058 6.30705 27.1711 6.15302L24.2439 2.80635C24.1092 2.65233 24.1249 2.41825 24.2789 2.28354V2.28354C24.4329 2.14882 24.667 2.16447 24.8017 2.31849L27.7289 5.66516C27.8636 5.81919 27.8479 6.05326 27.6939 6.18798V6.18798Z" fill=""></path>
	                            <path d="M34.3203 6.304V7H30.2963V6.456L32.5763 4.256C32.8536 3.98933 33.0403 3.76 33.1363 3.568C33.2323 3.37066 33.2803 3.17333 33.2803 2.976C33.2803 2.68266 33.1763 2.456 32.9683 2.296C32.7656 2.13066 32.4723 2.048 32.0883 2.048C31.4696 2.048 30.9923 2.25067 30.6563 2.656L30.1123 2.184C30.331 1.91733 30.6163 1.70933 30.9683 1.56C31.3256 1.41066 31.723 1.336 32.1603 1.336C32.747 1.336 33.2136 1.47733 33.5603 1.76C33.907 2.03733 34.0803 2.416 34.0803 2.896C34.0803 3.19466 34.0163 3.47733 33.8883 3.744C33.7603 4.01066 33.5176 4.31466 33.1603 4.656L31.4483 6.304H34.3203Z" fill=""></path>
	                            <path d="M38.2821 4.064C38.6021 4.18666 38.8474 4.36266 39.0181 4.592C39.1887 4.82133 39.2741 5.096 39.2741 5.416C39.2741 5.752 39.1834 6.04533 39.0021 6.296C38.8207 6.54133 38.5621 6.73067 38.2261 6.864C37.8901 6.99733 37.4954 7.064 37.0421 7.064C36.5941 7.064 36.2021 6.99733 35.8661 6.864C35.5354 6.73067 35.2794 6.54133 35.0981 6.296C34.9167 6.04533 34.8261 5.752 34.8261 5.416C34.8261 5.096 34.9087 4.82133 35.0741 4.592C35.2447 4.36266 35.4901 4.18666 35.8101 4.064C35.5541 3.94133 35.3594 3.77867 35.2261 3.576C35.0927 3.37333 35.0261 3.13333 35.0261 2.856C35.0261 2.54666 35.1087 2.27733 35.2741 2.048C35.4447 1.81866 35.6821 1.64266 35.9861 1.52C36.2901 1.39733 36.6421 1.336 37.0421 1.336C37.4474 1.336 37.8021 1.39733 38.1061 1.52C38.4154 1.64266 38.6527 1.81866 38.8181 2.048C38.9887 2.27733 39.0741 2.54666 39.0741 2.856C39.0741 3.128 39.0047 3.368 38.8661 3.576C38.7327 3.77867 38.5381 3.94133 38.2821 4.064ZM37.0421 1.984C36.6634 1.984 36.3647 2.06667 36.1461 2.232C35.9274 2.392 35.8181 2.61066 35.8181 2.888C35.8181 3.16533 35.9247 3.384 36.1381 3.544C36.3567 3.704 36.6581 3.784 37.0421 3.784C37.4314 3.784 37.7354 3.704 37.9541 3.544C38.1781 3.384 38.2901 3.16533 38.2901 2.888C38.2901 2.61066 38.1754 2.392 37.9461 2.232C37.7221 2.06667 37.4207 1.984 37.0421 1.984ZM37.0421 6.416C37.4847 6.416 37.8341 6.32533 38.0901 6.144C38.3461 5.95733 38.4741 5.70666 38.4741 5.392C38.4741 5.08266 38.3461 4.84 38.0901 4.664C37.8341 4.48266 37.4847 4.392 37.0421 4.392C36.5994 4.392 36.2527 4.48266 36.0021 4.664C35.7514 4.84 35.6261 5.08266 35.6261 5.392C35.6261 5.70666 35.7514 5.95733 36.0021 6.144C36.2527 6.32533 36.5994 6.416 37.0421 6.416Z" fill=""></path>
	                        </svg>
	                    </div>
	                    <div class="card_info">
	                        <p class="title">One - Time</p>
	                        <p class="month">1 MONTH - 28 DAYS</p>
	                        <div class="price">
	                            <span>$23.99</span>
	                            <span>$22.49</span>
	                            <span>PER 4 WEEKS</span>
	                        </div>
	                    </div>
	                </div>
	                <div class="card card_second" data-id="32115046056051">
	                    <div>
	                       <svg width="41" height="8" viewBox="0 0 41 8" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.66481 1.64672C3.76478 2.24413 2.37387 3.03749 1.72256 3.81918L1.46549 3.60499L1.72283 3.81886C1.69971 3.84668 1.66607 3.9137 1.64198 4.03689C1.61906 4.15412 1.61027 4.29352 1.61308 4.43616L1.61311 4.43774C1.61782 4.75219 1.76375 5.04877 2.01552 5.24745L2.01841 5.24973C2.61052 5.72763 3.63674 6.52235 4.30881 6.93837L4.31334 6.94123C4.62802 7.14305 5.00074 7.25759 5.39007 7.27967C6.04976 7.31064 7.07703 7.34714 7.83466 7.32289C8.05126 7.31384 8.26463 7.22092 8.52345 7.04374C8.68845 6.93078 8.84416 6.80489 9.01955 6.66309C9.1361 6.56886 9.26134 6.46761 9.40377 6.35845C10.0897 5.83277 10.9833 5.2882 12.3741 5.27482L12.3773 5.27479L12.5301 5.2748C13.921 5.28819 14.8131 5.83286 15.4983 6.35857C15.6395 6.46696 15.764 6.56761 15.8798 6.66133C16.056 6.80387 16.2124 6.93036 16.378 7.04365C16.6369 7.22065 16.8511 7.31384 17.0696 7.32289C17.8209 7.34713 18.848 7.31065 19.5142 7.27967C19.902 7.25767 20.2698 7.1437 20.593 6.93986L20.5999 6.93564C20.8444 6.78955 21.1387 6.58365 21.4446 6.35889L19.9982 1.90636C18.0067 1.16542 15.3728 0.669218 12.5331 0.669218H12.3836C9.88923 0.669218 7.55042 1.05384 5.66481 1.64672ZM5.46408 1.00831C7.41724 0.394191 9.82393 0 12.3836 0H12.5331C15.5175 0 18.2944 0.533567 20.3868 1.33788C20.481 1.37408 20.5538 1.45086 20.585 1.54683L22.1554 6.38103C22.1997 6.51735 22.1522 6.66673 22.0374 6.7525C21.6644 7.03111 21.2736 7.31237 20.9466 7.5081C20.5232 7.77423 20.0453 7.92014 19.5502 7.94792L19.547 7.9481C18.8799 7.97914 17.8275 8.017 17.0466 7.99171L17.044 7.99163C16.6428 7.97557 16.3036 7.80347 16.0003 7.59605C15.8174 7.47097 15.6206 7.31236 15.4249 7.15451C15.3123 7.06376 15.2 6.97325 15.0909 6.88951C14.4661 6.41011 13.7134 5.95585 12.5252 5.94402H12.379C11.1907 5.95585 10.4364 6.4102 9.81085 6.88962C9.70089 6.97389 9.58772 7.06507 9.47429 7.15646C9.27915 7.31368 9.08322 7.47154 8.90148 7.59595C8.59878 7.80318 8.26019 7.97553 7.86028 7.99162L7.85758 7.99173C7.07045 8.01701 6.0182 7.97913 5.35712 7.94808L5.35407 7.94794C4.85993 7.92021 4.3741 7.77462 3.95436 7.50602C3.24353 7.06566 2.19099 6.249 1.59942 5.77158C1.19178 5.44916 0.95196 4.96472 0.943981 4.44857C0.940602 4.27494 0.950538 4.08573 0.985205 3.90845C1.01876 3.73688 1.08171 3.54326 1.20815 3.39112L1.20842 3.3908C1.9842 2.45972 3.52534 1.6179 5.46408 1.00831Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M20.312 1.32484C20.439 1.34214 20.545 1.43052 20.5849 1.55239L22.1678 6.3928C22.2015 6.4959 22.1831 6.60895 22.1185 6.69608C22.0539 6.78322 21.9511 6.83364 21.8426 6.83134C21.2568 6.81892 20.6608 6.80025 20.2308 6.77512C19.7164 6.75145 19.2289 6.49913 18.9241 6.0789L18.9231 6.07748V6.07747C18.8248 5.94046 18.7208 5.78156 18.6442 5.61778C18.5711 5.46162 18.5053 5.26464 18.525 5.06005C18.5944 4.05377 19.1084 2.79484 19.9882 1.47117C20.0592 1.36438 20.1849 1.30755 20.312 1.32484ZM20.1711 2.44011C19.563 3.478 19.2401 4.40212 19.1923 5.11062C19.192 5.11485 19.1917 5.11908 19.1912 5.12329C19.1882 5.15198 19.1965 5.21909 19.2504 5.33417C19.3014 5.44322 19.3779 5.56331 19.4664 5.68667C19.6472 5.93559 19.9436 6.09243 20.2631 6.10668L20.2677 6.10688V6.10692C20.5721 6.12474 20.9665 6.13941 21.3846 6.15086L20.1711 2.44011Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.4981 3.25241C10.4977 3.25321 10.4972 3.25475 10.4972 3.25748C10.4972 3.2602 10.4977 3.26174 10.4981 3.26254C10.4985 3.26346 10.499 3.26425 10.4997 3.26493C10.5004 3.26561 10.5012 3.26623 10.5024 3.26671C10.5034 3.26714 10.5053 3.2677 10.5083 3.2677H13.8361C13.8392 3.2677 13.8411 3.26714 13.8421 3.26671C13.8432 3.26623 13.8441 3.26561 13.8448 3.26493C13.8455 3.26425 13.846 3.26346 13.8464 3.26254C13.8467 3.26174 13.8472 3.2602 13.8472 3.25748C13.8472 3.25475 13.8467 3.25321 13.8464 3.25241C13.846 3.2515 13.8455 3.25071 13.8448 3.25003C13.8441 3.24934 13.8432 3.24872 13.8421 3.24824C13.8411 3.24781 13.8392 3.24725 13.8361 3.24725H10.5083C10.5053 3.24725 10.5034 3.24781 10.5024 3.24824C10.5012 3.24872 10.5004 3.24934 10.4997 3.25003C10.499 3.25071 10.4985 3.2515 10.4981 3.25241ZM10.0957 3.25748C10.0957 3.02789 10.2799 2.84572 10.5083 2.84572H13.8361C14.0646 2.84572 14.2488 3.02789 14.2488 3.25748C14.2488 3.48706 14.0646 3.66923 13.8361 3.66923H10.5083C10.2799 3.66923 10.0957 3.48706 10.0957 3.25748Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M24.3725 6.22108C24.2153 6.09002 24.1941 5.85639 24.3252 5.69923L27.1728 2.28456C27.3038 2.1274 27.5375 2.10624 27.6946 2.2373C27.8518 2.36835 27.8729 2.60199 27.7419 2.75915L24.8943 6.17382C24.7633 6.33098 24.5296 6.35214 24.3725 6.22108Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M27.6939 6.18797C27.5399 6.32269 27.3058 6.30704 27.1711 6.15301L24.2439 2.80634C24.1092 2.65232 24.1249 2.41824 24.2789 2.28353C24.4329 2.14881 24.667 2.16446 24.8017 2.31848L27.7289 5.66515C27.8636 5.81918 27.8479 6.05325 27.6939 6.18797Z"></path></g><path d="M33.5859 4.1751C34.0979 3.9351 34.3779 3.5191 34.3779 2.9671C34.3779 2.0311 33.5619 1.4471 32.3459 1.4471C31.1379 1.4471 30.3299 2.0311 30.3299 2.9671C30.3299 3.5191 30.6019 3.9351 31.1139 4.1751C30.4819 4.4151 30.1299 4.8871 30.1299 5.5271C30.1299 6.5431 30.9859 7.1751 32.3459 7.1751C33.7139 7.1751 34.5779 6.5431 34.5779 5.5271C34.5779 4.8871 34.2259 4.4231 33.5859 4.1751ZM32.3459 2.0951C33.0979 2.0951 33.5939 2.4391 33.5939 2.9991C33.5939 3.5511 33.1219 3.8951 32.3459 3.8951C31.5779 3.8951 31.1219 3.5511 31.1219 2.9991C31.1219 2.4391 31.5939 2.0951 32.3459 2.0951ZM32.3459 6.5271C31.4579 6.5271 30.9299 6.1351 30.9299 5.5031C30.9299 4.8871 31.4579 4.5031 32.3459 4.5031C33.2339 4.5031 33.7779 4.8871 33.7779 5.5031C33.7779 6.1351 33.2339 6.5271 32.3459 6.5271Z"></path><path d="M40.1823 5.0471H39.1183V3.8311H38.3663V5.0471H36.2143L38.9583 1.5111H38.0943L35.2303 5.1751V5.7351H38.3423V7.1111H39.1183V5.7351H40.1823V5.0471Z"></path><defs><clipPath id="clip0"><rect width="40" height="8"></rect></clipPath></defs></svg>
	                    </div>
	                    <div class="card_info">
	                        <p class="title">Save 7%</p>
	                        <p class="month">3 MONTHS - 84 DAYS</p>
	                        <div class="price">
	                            <span>$59.99</span>
	                            <span>$55.97</span>
	                            <span>PER 12 WEEKS</span>
	                        </div>
	                    </div>
	                </div>
	                <div class="card card_third" data-id="32115046940787">
	                <div>
	                   <svg width="41" height="8" viewBox="0 0 41 8" fill="none" xmlns="http://www.w3.org/2000/svg"> <path fill-rule="evenodd" clip-rule="evenodd" d="M4.59571 1.64672C2.81201 2.24413 1.50626 3.03749 0.894825 3.81918L0.653493 3.60499L0.895078 3.81886C0.873374 3.84668 0.841793 3.9137 0.819178 4.03689C0.797661 4.15412 0.789409 4.29352 0.792047 4.43616L0.792075 4.43774C0.796497 4.75219 0.933493 5.04877 1.16985 5.24745L1.17256 5.24973C1.72842 5.72763 2.69181 6.52235 3.32273 6.93837L3.32699 6.94123C3.6224 7.14305 3.9723 7.25759 4.33779 7.27967C4.95709 7.31064 5.92147 7.34714 6.63272 7.32289C6.83605 7.31384 7.03636 7.22092 7.27933 7.04374C7.43423 6.93078 7.58041 6.80489 7.74506 6.66309C7.85448 6.56886 7.97205 6.46761 8.10576 6.35845C8.74969 5.83277 9.58858 5.2882 10.8942 5.27482L10.8972 5.27479L11.0407 5.2748C12.3464 5.28819 13.1839 5.83286 13.8272 6.35857C13.9597 6.46696 14.0766 6.56761 14.1853 6.66133C14.3507 6.80387 14.4975 6.93036 14.653 7.04365C14.896 7.22065 15.0971 7.31384 15.3023 7.32289C16.0076 7.34713 16.9718 7.31065 17.5972 7.27967C17.9612 7.25767 18.3065 7.1437 18.6099 6.93986L18.6164 6.93564C18.8459 6.78955 19.1222 6.58365 19.4094 6.35889L18.0515 1.90636C16.182 1.16542 13.7093 0.669218 11.0435 0.669218H10.9031C8.5615 0.669218 6.36588 1.05384 4.59571 1.64672ZM4.40727 1.00831C6.24085 0.394191 8.50019 0 10.9031 0H11.0435C13.8452 0 16.4521 0.533567 18.4164 1.33788C18.5048 1.37408 18.5731 1.45086 18.6024 1.54683L20.0767 6.38103C20.1183 6.51735 20.0737 6.66673 19.9659 6.7525C19.6157 7.03111 19.2489 7.31237 18.9419 7.5081C18.5444 7.77423 18.0958 7.92014 17.631 7.94792L17.628 7.9481C17.0017 7.97914 16.0138 8.017 15.2807 7.99171L15.2782 7.99163C14.9016 7.97557 14.5831 7.80347 14.2984 7.59605C14.1267 7.47097 13.942 7.31236 13.7582 7.15451C13.6525 7.06376 13.5471 6.97325 13.4447 6.88951C12.8581 6.41011 12.1515 5.95585 11.0361 5.94402H10.8988C9.78328 5.95585 9.07516 6.4102 8.48791 6.88962C8.38469 6.97389 8.27845 7.06507 8.17196 7.15646C7.98877 7.31368 7.80483 7.47154 7.63422 7.59595C7.35005 7.80318 7.03219 7.97553 6.65677 7.99162L6.65423 7.99173C5.91529 8.01701 4.92747 7.97913 4.30686 7.94808L4.304 7.94794C3.84011 7.92021 3.38403 7.77462 2.98998 7.50602C2.32267 7.06566 1.33458 6.249 0.779224 5.77158C0.396541 5.44916 0.171404 4.96472 0.163914 4.44857C0.160741 4.27494 0.170069 4.08573 0.202614 3.90845C0.234114 3.73688 0.29321 3.54326 0.411909 3.39112L0.412162 3.3908C1.14045 2.45972 2.58723 1.6179 4.40727 1.00831Z" fill="black"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M18.3462 1.32484C18.4654 1.34214 18.5649 1.43052 18.6024 1.55239L20.0884 6.3928C20.12 6.4959 20.1027 6.60895 20.0421 6.69608C19.9814 6.78322 19.8849 6.83364 19.7831 6.83134C19.2331 6.81892 18.6736 6.80025 18.27 6.77512C17.7871 6.75145 17.3294 6.49913 17.0433 6.0789L17.0423 6.07748V6.07747C16.95 5.94046 16.8524 5.78156 16.7805 5.61778C16.7119 5.46162 16.6501 5.26464 16.6686 5.06005C16.7338 4.05377 17.2163 2.79484 18.0422 1.47117C18.1089 1.36438 18.2269 1.30755 18.3462 1.32484ZM18.2139 2.44011C17.643 3.478 17.3399 4.40212 17.295 5.11062C17.2948 5.11485 17.2945 5.11908 17.294 5.12329C17.2912 5.15198 17.299 5.21909 17.3496 5.33417C17.3975 5.44322 17.4693 5.56331 17.5524 5.68667C17.7221 5.93559 18.0003 6.09243 18.3003 6.10668L18.3046 6.10688V6.10692C18.5904 6.12474 18.9606 6.13941 19.3531 6.15086L18.2139 2.44011Z" fill="black"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M9.13313 3.25239C9.13276 3.25319 9.13229 3.25473 9.13229 3.25746C9.13229 3.26018 9.13276 3.26172 9.13313 3.26252C9.13351 3.26344 9.13398 3.26423 9.13464 3.26491C9.13529 3.26559 9.13604 3.26621 9.13717 3.26669C9.13811 3.26712 9.13989 3.26768 9.14271 3.26768H12.2668C12.2697 3.26768 12.2715 3.26712 12.2724 3.26669C12.2734 3.26621 12.2743 3.26559 12.2749 3.26491C12.2756 3.26423 12.2761 3.26344 12.2764 3.26252C12.2767 3.26172 12.2772 3.26018 12.2772 3.25746C12.2772 3.25473 12.2767 3.25319 12.2764 3.25239C12.2761 3.25148 12.2756 3.25069 12.2749 3.25001C12.2743 3.24932 12.2734 3.2487 12.2724 3.24822C12.2715 3.24779 12.2697 3.24723 12.2668 3.24723H9.14271C9.13989 3.24723 9.13811 3.24779 9.13717 3.24822C9.13604 3.2487 9.13529 3.24932 9.13464 3.25001C9.13398 3.25069 9.13351 3.25148 9.13313 3.25239ZM8.75537 3.25746C8.75537 3.02787 8.92829 2.8457 9.14271 2.8457H12.2668C12.4813 2.8457 12.6542 3.02787 12.6542 3.25746C12.6542 3.48704 12.4813 3.66921 12.2668 3.66921H9.14271C8.92829 3.66921 8.75537 3.48704 8.75537 3.25746Z" fill="black"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M22.1581 6.22106C22.0105 6.09 21.9906 5.85637 22.1137 5.69921L24.7869 2.28454C24.9099 2.12738 25.1293 2.10622 25.2768 2.23728C25.4244 2.36833 25.4442 2.60197 25.3212 2.75913L22.6479 6.1738C22.525 6.33096 22.3056 6.35212 22.1581 6.22106Z" fill="black"></path> <path fill-rule="evenodd" clip-rule="evenodd" d="M25.2762 6.18797C25.1316 6.32269 24.9118 6.30704 24.7854 6.15301L22.0374 2.80634C21.911 2.65232 21.9257 2.41824 22.0703 2.28353C22.2148 2.14881 22.4346 2.16446 22.5611 2.31848L25.309 5.66515C25.4355 5.81918 25.4208 6.05325 25.2762 6.18797Z" fill="black"></path> <path d="M28.5237 3.80469H29.0667C29.4078 3.79948 29.676 3.70964 29.8713 3.53516C30.0667 3.36068 30.1643 3.125 30.1643 2.82812C30.1643 2.16146 29.8323 1.82812 29.1682 1.82812C28.8557 1.82812 28.6057 1.91797 28.4182 2.09766C28.2333 2.27474 28.1409 2.51042 28.1409 2.80469H27.4182C27.4182 2.35417 27.5823 1.98047 27.9104 1.68359C28.2411 1.38411 28.6604 1.23438 29.1682 1.23438C29.7047 1.23438 30.1252 1.3763 30.4299 1.66016C30.7346 1.94401 30.887 2.33854 30.887 2.84375C30.887 3.09115 30.8062 3.33073 30.6448 3.5625C30.4859 3.79427 30.2685 3.96745 29.9924 4.08203C30.3049 4.18099 30.5458 4.34505 30.7151 4.57422C30.887 4.80339 30.9729 5.08333 30.9729 5.41406C30.9729 5.92448 30.8062 6.32943 30.4729 6.62891C30.1396 6.92839 29.706 7.07812 29.1721 7.07812C28.6383 7.07812 28.2034 6.93359 27.8674 6.64453C27.5341 6.35547 27.3674 5.97396 27.3674 5.5H28.094C28.094 5.79948 28.1917 6.03906 28.387 6.21875C28.5823 6.39844 28.844 6.48828 29.1721 6.48828C29.5211 6.48828 29.788 6.39714 29.9729 6.21484C30.1578 6.03255 30.2502 5.77083 30.2502 5.42969C30.2502 5.09896 30.1487 4.84505 29.9456 4.66797C29.7424 4.49089 29.4495 4.39974 29.0667 4.39453H28.5237V3.80469Z" fill="black"></path> <path d="M34.801 1.30859V1.92188H34.6682C34.1057 1.93229 33.6578 2.09896 33.3245 2.42188C32.9911 2.74479 32.7984 3.19922 32.7463 3.78516C33.0458 3.44141 33.4547 3.26953 33.9729 3.26953C34.4677 3.26953 34.8622 3.44401 35.1565 3.79297C35.4534 4.14193 35.6018 4.59245 35.6018 5.14453C35.6018 5.73047 35.4417 6.19922 35.1213 6.55078C34.8036 6.90234 34.3765 7.07812 33.8401 7.07812C33.2958 7.07812 32.8544 6.86979 32.5159 6.45312C32.1773 6.03385 32.0081 5.49479 32.0081 4.83594V4.55859C32.0081 3.51172 32.2307 2.71224 32.676 2.16016C33.1239 1.60547 33.7893 1.32161 34.6721 1.30859H34.801ZM33.8518 3.87109C33.6044 3.87109 33.3765 3.94531 33.1682 4.09375C32.9599 4.24219 32.8153 4.42839 32.7346 4.65234V4.91797C32.7346 5.38672 32.8401 5.76432 33.051 6.05078C33.262 6.33724 33.525 6.48047 33.8401 6.48047C34.1656 6.48047 34.4208 6.36068 34.6057 6.12109C34.7932 5.88151 34.887 5.56771 34.887 5.17969C34.887 4.78906 34.7919 4.47396 34.6018 4.23438C34.4143 3.99219 34.1643 3.87109 33.8518 3.87109Z" fill="black"></path> <path d="M36.7893 4.14844L37.0784 1.3125H39.9924V1.98047H37.6917L37.5198 3.53125C37.7984 3.36719 38.1148 3.28516 38.469 3.28516C38.9872 3.28516 39.3987 3.45703 39.7034 3.80078C40.0081 4.14193 40.1604 4.60417 40.1604 5.1875C40.1604 5.77344 40.0015 6.23568 39.6838 6.57422C39.3687 6.91016 38.9273 7.07812 38.3596 7.07812C37.857 7.07812 37.4469 6.9388 37.1292 6.66016C36.8114 6.38151 36.6305 5.99609 36.5862 5.50391H37.2698C37.314 5.82943 37.4299 6.07552 37.6174 6.24219C37.8049 6.40625 38.0523 6.48828 38.3596 6.48828C38.6956 6.48828 38.9586 6.3737 39.1487 6.14453C39.3414 5.91536 39.4377 5.59896 39.4377 5.19531C39.4377 4.8151 39.3336 4.51042 39.1252 4.28125C38.9195 4.04948 38.6448 3.93359 38.301 3.93359C37.9859 3.93359 37.7385 4.0026 37.5588 4.14062L37.3674 4.29688L36.7893 4.14844Z" fill="black"></path></svg>
	                </div>
	                <div class="card_info">
	                    <p class="title">Save 15%</p>
	                    <p class="month">12 MONTHS - 365 DAYS</p>
	                    <div class="price">
	                        <span>$259.99</span>
	                        <span>$219.97</span>
	                        <span>PER 12 MONTHS</span>
	                    </div>
	                </div>
	            </div>
		            <div class="subscribe_block">
		                <label class="custom_checkbox">
		                    <input type="checkbox" checked>
		                    <p>Subscribe and <span style="color: #F0752D;">save 10%</span></p>
		                </label>
		                <p class="undertext"><span>Auto delivery every 3 month for <span class="check_price">$49.97</span><br>Cancel anytime</span></p>
		            </div>
	            </div>
	            <div class="body_footer">
	            	<div class="calc_block">
	                <div class="left">
	                	<div class="signs">
	                		<img class="sign minus" src="https://conversionratestore.github.io/projects/somnifix/img/minus_btn.svg" alt="minus">
	                		<span>1</span>
	                		<img class="sign plus" src="https://conversionratestore.github.io/projects/somnifix/img/plus_btn.svg" alt="plus">
						</div>	                	
	                	<p class="strips">28 Strips - 1 month</p>
					</div>
					<div class="right">
						<p class="full_price">$23.99</p>
						<p class="sale_price">$22.49</p>
					</div>
	            </div>
	            <div class="calc_btn">
	            	<button>CHECKOUT</button>
				</div>
				</div>	            
	        </div>        
`

document.head.insertAdjacentHTML('beforeend', STYLE)

let isCloseX = setInterval(() => {
	if(document.querySelectorAll('.on-button-get-sominifix-close')[1]) {
		clearInterval(isCloseX)

		let closeX = document.querySelectorAll('.on-button-get-sominifix-close')[1]

		closeX.insertAdjacentHTML('afterend', TEMPLATE)
		closeX.addEventListener('click', () => {
			window.dataLayer = window.dataLayer || [];
			dataLayer.push({
				'event': 'event-to-ga',
				'eventCategory': 'Exp: Slide PDP subscription offer',
				'eventAction': 'Click at Close button'
			});

			console.log('eventAction: Click at Close button')
		})
	}
}, 200)
let isTemplate = setInterval(() => {
	if (
		document.querySelector('.calc_btn button')
	) {
		clearInterval(isTemplate)

		let checkInput = document.querySelector('.custom_checkbox input')
		let cardQuantity = document.querySelector('.signs span')
		let fullPrice = document.querySelector('.full_price')
		let salePrice = document.querySelector('.sale_price')
		let signs = document.querySelector('.signs')
		let checkbox = document.querySelector('.subscribe_block')
		let checkboxText = document.querySelector('.undertext span')
		let stripsText = document.querySelector('.strips')
		let cards = document.querySelectorAll('.sidebar_body .card')

		let counter = 1

		function onCardClick(e, index) {
			let card = e.currentTarget

			document.querySelector('.card.selected').classList.remove('selected')
			card.classList.add('selected')

			counter = 1
			cardQuantity.innerText = 1
			fullPrice.innerText = card.querySelectorAll('.price span')[0].innerText
			salePrice.innerText = card.querySelectorAll('.price span')[1].innerText

			signs.classList.add('blur')

			switch(index) {
				case 1:
					changeCheckboxText('3', '$49.97', '84', '12 Weeks')
					break
				case 2:
					changeCheckboxText('12', '$199.97', '365', '12 Months')
					break
				default:
					checkbox.classList.remove('visible')
					stripsText.innerText = '28 Strips = 4 Weeks'
					break
			}
		}
		function changeCheckboxText (month, price, strips, time) {
			checkbox.classList.add('visible')
			checkboxText.innerHTML = `Auto delivery every ${month} month for <span class="check_price">${price}</span><br>Cancel anytime`
			stripsText.innerText = `${strips} Strips = ${time}`

			window.dataLayer = window.dataLayer || [];
			dataLayer.push({
				'event': 'event-to-ga',
				'eventCategory': 'Exp: Slide PDP subscription offer',
				'eventAction': 'Click at pack',
				'eventLabel': `${month} months`
			});

			console.log(`eventAction: Click at pack; eventLabel: ${ month } months >>>`)
		}
		function calculatePatches() {
			checkInput.checked = true

			document.querySelector('.sign.plus').addEventListener('click', () => {
				if (counter < 20) {
					counter++
					calcPrice()
				}
			})
			document.querySelector('.sign.minus').addEventListener('click', () => {
				if (counter > 1) {
					counter--
					calcPrice()
				}
			})
		}
		function calcPrice() {
			cardQuantity.innerText = counter

			let price = (document.querySelectorAll('.card.selected .price span')[0].innerText).replace('$', '') * counter
			let sale = (document.querySelectorAll('.card.selected .price span')[1].innerText).replace('$', '') * counter

			fullPrice.innerText = '$' + convertToMoney(price)
			salePrice.innerText = '$' + convertToMoney(sale)
		}
		function convertToMoney(amount) {
			return (Math.round(amount * 100) / 100).toFixed(2)
		}
		function checkSubscription() {
			document.querySelector('.custom_checkbox input').addEventListener('click', () => {
				if (checkInput.checked) {
					counter = 1
					cardQuantity.innerText = 1

					fullPrice.innerText = document.querySelector('.card.selected .price span').innerText
					salePrice.innerText = document.querySelector('.check_price').innerText

					signs.classList.add('blur')
				} else {
					signs.classList.remove('blur')
					salePrice.innerText = document.querySelectorAll('.card.selected .price span')[1].innerText
				}

				window.dataLayer = window.dataLayer || [];
				dataLayer.push({
					'event': 'event-to-ga',
					'eventCategory': 'Exp: Slide PDP subscription offer',
					'eventAction': 'Click at checkbox Subscribe and save'
				});

				console.log('eventAction: Click at checkbox Subscribe and save >>>')
			})
		}
		function addToCart() {
			let btn = document.querySelector('.calc_btn button')
			let selectedCardId = document.querySelector('.selected').dataset.id

			btn.addEventListener('click', () => {
				console.log('sss')

				if(checkInput.checked) {
					if (selectedCardId === "32115046056051") {
				        addItemToCart("31272810676339", 1, "3", "Month", "95310");

				    } else if (selectedCardId === "32115046940787") {
				        addItemToCart("32190023958643", 1, "12", "Month", "95310");
				    }
				} else {
					addItemToCart(selectedCardId, cardQuantity);
				}
			})
		}

		cards.forEach( (card, index) => {
			card.addEventListener("click", e => {
				onCardClick(e, index)
			})
		})

		calculatePatches()
		checkSubscription()
		addToCart()
	}
}, 300)
let isClarity = setInterval(() => {
	if(typeof clarity == 'function') {
		clearInterval(isClarity)
		clarity("set", "slide_subscription_offer", "variant_1");
	}
}, 200)

window.dataLayer = window.dataLayer || [];
dataLayer.push({
	'event': 'event-to-ga',
	'eventCategory': 'Exp: Slide PDP subscription offer',
	'eventAction': 'loaded'
});

console.log('eventAction: loaded >>>')
